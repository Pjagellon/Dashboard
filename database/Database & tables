CREATE DATABASE signwizard_chatbot CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE signwizard_chatbot;

CREATE TABLE tbl_admin (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(100) NOT NULL UNIQUE,
  password VARCHAR(255) NOT NULL,   -- store password_hash
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE tbl_faq (
  id INT AUTO_INCREMENT PRIMARY KEY,
  question TEXT NOT NULL,
  answer TEXT NOT NULL,
  language VARCHAR(10) NOT NULL DEFAULT 'en',
  date_added TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE tbl_chat_history (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id VARCHAR(128) DEFAULT 'guest',
  message TEXT,
  response TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Insert an admin (change password 'changeme' to something strong)
INSERT INTO tbl_admin (username, password) VALUES (
  'admin',
  -- replace this hashed password with your own generated by password_hash('yourpassword', PASSWORD_DEFAULT)
  '$2y$10$EXAMPLE_HASH_REPLACE_WITH_PHP_PASSWORD_HASH'
);
